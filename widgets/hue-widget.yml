uid: hue_widget
tags: ["light", "colorlight"]
props:
  parameters:
    - description: Light bulb label
      label: Light bulb label
      name: label
      required: false
      type: TEXT
    - context: item
      description: Light bulb to control
      label: Light bulb Item
      name: lightItem
      required: false
      type: TEXT
    - context: item
      description: Light color temperature item
      label: Light Temperature Item
      name: lightTemperatureItem
      required: false
      type: TEXT
    - context: item
      description: Light scenes item to change the current scene
      label: Light scenes Item
      name: lightScenesItem
      required: false
      type: TEXT
    - description: Light members, contains a multi array like ["label", "colorItem", "temperatureItem"]
      label: Light members array
      name: lightMembers
      required: false
      type: TEXT
  parameterGroups: []
timestamp: Nov 21, 2022, 7:17:10 PM
component: f7-card
config:
  style:
    minWidth: 300px
slots:
  default:
    - component: f7-card-content
      config:
        class:
          - display-flex
          - flex-direction-column
          - justify-content-flex-start
          - align-items-center
        style:
          height: 175px
          --f7-color-picker-slider-size: 18px
          --f7-color-picker-slider-knob-size: 22px
      slots:
        default:
          - component: f7-row
            config:
              style:
                position: absolute
            slots:
              default:
                - component: f7-block-header
                  slots:
                    default:
                      - component: Label
                        config:
                          text: '=props.label ? props.label : "Light bulb"'
          - component: f7-block
            config:
              class:
                - margin-top
                - no-padding
              style:
                width: 100%
                height: 100%
            slots:
              default:
                - component: f7-block
                  config:
                    visible: "=vars.color != true ? true : false"
                    class:
                      - display-flex
                      - flex-direction-column
                      - justify-content-flex-end
                    style:
                      animation: f7-circle-circle-in 300ms
                      height: 60%
                      margin-top: 10px
                  slots:
                    default:
                      - component: f7-row
                        config:
                          visible: "=props.lightItem ? true : false"
                          class:
                            - display-flex
                            - justify-content-space-between
                            - align-items-center
                          style:
                            width: calc(100% + 20px)
                            margin-left: -10px
                        slots:
                          default:
                            - component: f7-icon
                              config:
                                f7: thermometer
                                size: 20
                                style:
                                  margin-left: 20px
                                  color: var(--f7-block-header-text-color)
                            - component: Label
                              config:
                                text: '=props.lightTemperatureItem ? items[props.lightTemperatureItem].state + " %" : "-" '
                                style:
                                  margin-right: 20px
                                  color: var(--f7-block-header-text-color)
                      - component: f7-row
                        config:
                          visible: "=props.lightTemperatureItem ? true : false"
                          class:
                            - display-flex
                            - justify-content-center
                            - align-items-center
                          style:
                            width: 100%
                        slots:
                          default:
                            - component: oh-slider
                              config:
                                color: white
                                label: true
                                min: 0
                                max: 100
                                item: =props.lightTemperatureItem
                                style:
                                  margin-top: 7px
                                  --f7-range-bar-size: 18px
                                  --f7-range-bar-border-radius: 10px
                                  --f7-range-knob-size: 20px
                                  --f7-range-bar-active-bg-color: transparent
                                  --f7-range-bar-bg-color: linear-gradient(to right, rgba(215, 226, 255), rgba(255, 255, 255),rgba(255, 147, 44, 0.5),rgba(255, 147, 44, 0))
                                  --f7-range-knob-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3)
                                  --f7-range-label-text-color: black
                                  width: 100%
                                  z-index: 99 !important
                      - component: f7-row
                        config:
                          visible: "=props.lightItem ? true : false"
                          class:
                            - display-flex
                            - justify-content-space-between
                            - align-items-center
                          style:
                            width: calc(100% + 20px)
                            margin-left: -10px
                            margin-top: 20px
                        slots:
                          default:
                            - component: f7-icon
                              config:
                                f7: sun_min
                                size: 20
                                style:
                                  margin-left: 20px
                                  color: var(--f7-block-header-text-color)
                            - component: Label
                              config:
                                text: '=props.lightItem ? items[props.lightItem].state.split(",")[2] + " %" : "- %"'
                                style:
                                  margin-right: 20px
                                  color: var(--f7-block-header-text-color)
                      - component: f7-row
                        config:
                          visible: "=props.lightItem ? true : false"
                          class:
                            - display-flex
                            - justify-content-center
                            - align-items-center
                          style:
                            width: 100%
                            margin-top: 5px
                        slots:
                          default:
                            - component: oh-slider
                              config:
                                color: white
                                label: true
                                item: =props.lightItem
                                style:
                                  --f7-range-bar-size: 18px
                                  --f7-range-bar-border-radius: 10px
                                  --f7-range-knob-size: 20px
                                  --f7-range-bar-active-bg-color: rgba(246,246,0,0.5)
                                  --f7-range-bar-bg-color: linear-gradient(to right, rgba(169,169,169,0.8), rgba(246,158,81,0))
                                  --f7-range-knob-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3)
                                  --f7-range-label-text-color: black
                                  width: 100%
                                  z-index: 99 !important
                - component: f7-block
                  config:
                    visible: "=vars.color != true ? false : true"
                    class:
                      - no-margin
                    style:
                      animation: f7-circle-circle-in 300ms
                  slots:
                    default:
                      - component: f7-row
                        config:
                          class:
                            - display-flex
                            - justify-content-center
                        slots:
                          default:
                            - component: f7-block
                              config:
                                style:
                                  width: 100%
                              slots:
                                default:
                                  - component: oh-colorpicker
                                    config:
                                      style:
                                        margin-top: 7px
                                        --f7-range-bar-size: 18px
                                        --f7-range-bar-border-radius: 10px
                                        --f7-range-knob-size: 20px
                                        --f7-range-bar-active-bg-color: transparent
                                        --f7-range-bar-bg-color: linear-gradient(to right, rgba(246,158,81,0.8), rgba(246,158,81,0))
                                        --f7-range-knob-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3)
                                        --f7-range-label-text-color: black
                                        width: 100%
                                        z-index: 99 !important
                                      item: =props.lightItem
                                      modules:
                                        - hsb-sliders
          - component: f7-block
            config:
              class:
                - display-flex
                - justify-content-center
                - align-items-center
                - no-padding
                - no-margin
              style:
                position: absolute
                width: 40px
                height: 40px
                left: 30px
                bottom: 10px
                border-top: none
                background: var(--f7-searchbar-search-icon-color)
                box-shadow: var(--f7-actions-bg-color) 0px 0px 16px inset
                border-radius: 50%
            slots:
              default:
                - component: f7-block
                  config:
                    class:
                      - no-margin
                    style:
                      position: absolute
                      width: 100%
                      height: 100%
                      box-shadow: '=items[props.lightItem].state.split(",")[2] > 0 ? "0 0 7px #000, 0px 0px 7px rgba(0,255,0,0.5)" : "none"'
                      border-radius: 50%
                      transition: transform 0.2s
                      background: '=items[props.lightItem].state.split(",")[2] > 0 ? "rgba(0, 255, 0, 0.9)" : "transparent"'
                      transform: '=items[props.lightItem].state.split(",")[2] > 0 ? "scale(1)" : "scale(0,0)"'
                - component: f7-block
                  config:
                    style:
                      position: absolute
                      width: calc(100% - 10px)
                      height: calc(100% - 10px)
                      border-radius: 50%
                - component: oh-link
                  config:
                    iconOnly: true
                    iconF7: power
                    iconSize: 13
                    action: toggle
                    actionItem: =props.lightItem
                    actionCommand: '=items[props.lightItem].state.split(",")[2] > "0" ? "0" : "100"'
                    class:
                      - display-flex
                    style:
                      position: absolute
                      width: calc(100% - 10px)
                      height: calc(100% - 10px)
                      border-radius: 50%
                      background-color: var(--f7-actions-bg-color)
                      color: "#a7a7a7"
                      text-align: center
                      backdrop-filter: opacity(88%)
                      z-index: 99 !important
                      box-shadow: 0px 0px 7px 2px var(--f7-actions-bg-color)
          - component: f7-block
            config:
              visible: "=props.lightMembers ? true : false"
              class:
                - display-flex
                - justify-content-center
                - align-items-center
                - no-padding
                - no-margin
              style:
                position: absolute
                bottom: 10px
                right: 130px
                width: 40px
                height: 40px
                border-top: none
                background: var(--f7-searchbar-search-icon-color)
                box-shadow: var(--f7-actions-bg-color) 0px 0px 16px inset
                border-radius: 50%
            slots:
              default:
                - component: f7-block
                  config:
                    class:
                      - no-margin
                    style:
                      position: absolute
                      width: 100%
                      height: 100%
                      border-radius: 50%
                      transition: transform 0.5s
                      background: transparent
                      transform: scale(0,0)
                - component: f7-block
                  config:
                    style:
                      position: absolute
                      width: calc(100% - 10px)
                      height: calc(100% - 10px)
                      background: var(--f7-actions-bg-color)
                      border-radius: 50%
                - component: oh-link
                  config:
                    iconOnly: true
                    iconF7: square_grid_3x2
                    iconSize: 17
                    popupOpen: .popupLightMembers
                    style:
                      border: solid 2pt var(--f7-actions-bg-color)
                      border-radius: 50%
                      background-color: var(--f7-actions-bg-color)
                      background-image: "linear-gradient(135deg, #f7f7f7: none, #e7e7e7)"
                      color: "#a7a7a7"
                      width: calc(100% - 10px)
                      height: calc(100% - 10px)
                      text-align: center
                      box-shadow: 0px 0px 7px 2px var(--f7-actions-bg-color)
                      backdrop-filter: opacity(88%)
                    class:
                      - nextSlide
                  slots:
                    default:
                      - component: f7-popup
                        config:
                          class:
                            - popupLightMembers
                            - padding-bottom
                          style:
                            --f7-popup-tablet-width: '=screen.viewAreaWidth >= 1080 ? "1020px" : screen.viewAreaWidth >= 800 ? "680px" : ""'
                            max-height: 90%
                        slots:
                          default:
                            - component: f7-block
                              config:
                                class:
                                  - display-flex
                                  - justify-content-space-around
                                  - align-items-center
                                  - padding-bottom
                                style:
                                  flex-flow: row wrap
                                  overflow-y: auto
                                  max-height: 100%
                              slots:
                                default:
                                  - component: oh-repeater
                                    config:
                                      for: lightMember
                                      in: =JSON.parse(props.lightMembers)
                                      fragment: true
                                      sourceType: array
                                    slots:
                                      default:
                                        - component: widget:hue_widget
                                          config:
                                            label: =loop.lightMember[0]
                                            lightItem: =loop.lightMember[1]
                                            lightTemperatureItem: =loop.lightMember[2]
          - component: f7-block
            config:
              visible: "=props.lightScenesItem ? true : false"
              class:
                - display-flex
                - justify-content-center
                - align-items-center
                - no-padding
                - no-margin
              style:
                position: absolute
                bottom: 10px
                right: 80px
                width: 40px
                height: 40px
                border-top: none
                background: var(--f7-searchbar-search-icon-color)
                box-shadow: var(--f7-actions-bg-color) 0px 0px 16px inset
                border-radius: 50%
            slots:
              default:
                - component: f7-block
                  config:
                    class:
                      - no-margin
                    style:
                      position: absolute
                      width: 100%
                      height: 100%
                      border-radius: 50%
                      transition: transform 0.5s
                      background: transparent
                      transform: scale(0,0)
                - component: f7-block
                  config:
                    style:
                      position: absolute
                      width: calc(100% - 10px)
                      height: calc(100% - 10px)
                      background: var(--f7-actions-bg-color)
                      border-radius: 50%
                - component: oh-link
                  config:
                    iconOnly: true
                    iconF7: square_favorites
                    iconSize: 17
                    action: options
                    actionItem: =props.lightScenesItem
                    style:
                      border: solid 2pt var(--f7-actions-bg-color)
                      border-radius: 50%
                      background-color: var(--f7-actions-bg-color)
                      background-image: "linear-gradient(135deg, #f7f7f7: none, #e7e7e7)"
                      color: "#a7a7a7"
                      width: calc(100% - 10px)
                      height: calc(100% - 10px)
                      text-align: center
                      box-shadow: 0px 0px 7px 2px var(--f7-actions-bg-color)
                      backdrop-filter: opacity(88%)
                    class:
                      - nextSlide
          - component: f7-block
            config:
              visible: "=props.lightItem ? true : false"
              class:
                - display-flex
                - justify-content-center
                - align-items-center
                - no-padding
                - no-margin
              style:
                position: absolute
                bottom: 10px
                right: 30px
                width: 40px
                height: 40px
                border-top: none
                background: var(--f7-searchbar-search-icon-color)
                box-shadow: var(--f7-actions-bg-color) 0px 0px 16px inset
                border-radius: 50%
            slots:
              default:
                - component: f7-block
                  config:
                    class:
                      - no-margin
                    style:
                      position: absolute
                      width: 100%
                      height: 100%
                      box-shadow: '=vars.color == true ? "rgb(0 0 0) 0px 0px 4px, rgb(255 0 0 / 50%) -1px -1px 4px, rgb(255 255 0 / 50%) 1px -1px 4px, rgb(0 255 0 / 50%) 1px 1px 4px, rgb(0 0 255 / 50%) -1px 1px 4px" : "none"'
                      border-radius: 50%
                      transition: transform 0.5s
                      background: '=vars.color == true ? "linear-gradient(135deg, red, red, orange, yellow, green, blue, blue)" : "transparent"'
                      transform: '=vars.color == true ? "rotate(360deg) scale(1,1)" : "rotate(0deg) scale(0,0)"'
                - component: f7-block
                  config:
                    style:
                      position: absolute
                      width: calc(100% - 10px)
                      height: calc(100% - 10px)
                      background: var(--f7-actions-bg-color)
                      border-radius: 50%
                - component: oh-link
                  config:
                    iconOnly: true
                    iconF7: paintbrush
                    iconSize: 17
                    action: variable
                    actionVariable: color
                    actionVariableValue: true
                    style:
                      display: '=(vars.color == false || vars.color != true) ? "block" : "none"'
                      border: solid 2pt var(--f7-actions-bg-color)
                      border-radius: 50%
                      background-color: var(--f7-actions-bg-color)
                      background-image: "linear-gradient(135deg, #f7f7f7: none, #e7e7e7)"
                      color: "#a7a7a7"
                      width: calc(100% - 10px)
                      height: calc(100% - 10px)
                      text-align: center
                      box-shadow: 0px 0px 7px 2px var(--f7-actions-bg-color)
                      backdrop-filter: opacity(88%)
                    class:
                      - nextSlide
                - component: oh-link
                  config:
                    iconOnly: true
                    iconF7: paintbrush_fill
                    iconSize: 17
                    action: variable
                    actionVariable: color
                    actionVariableValue: false
                    style:
                      display: '=(vars.color) ? "block" : "none"'
                      border: solid 2pt var(--f7-actions-bg-color)
                      border-radius: 50%
                      background-color: var(--f7-actions-bg-color)
                      color: "#a7a7a7"
                      width: calc(100% - 10px)
                      height: calc(100% - 10px)
                      text-align: center
                      backdrop-filter: opacity(88%)
                    class:
                      - previousSlide
    - component: f7-card-footer
      slots:
        default:
          - component: Label
            config:
              text: '=props.lightItem ? items[props.lightItem].state.split(",")[2] > 0 ? "Licht an" : "Licht aus" : "Licht aus"'
